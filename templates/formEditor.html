<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Form</title>
        <script src="https://cdn.tailwindcss.com"></script>
    </head>
    <body class="bg-gray-100 overflow-y-scroll">
        <div class="flex h-screen">
            <!-- Sidebar -->
            <div class="w-96 h-screen bg-white shadow-lg p-4 rounded-r-3xl fixed top-0 h-screen flex flex-col items-center justify-between">
                <div>
                    <h2 class="text-xl font-bold mb-4">Forms</h2>
                    <div class="w-80 overflow-hidden flex flex-col gap-3 overflow-y-auto pr-3 h-[calc(80vh)]">
                        <button class="w-full bg-gray-100/50 bg-gray-200 py-1 px-3 hover:bg-gray-200 flex items-center justify-between rounded-lg sidebar-button" onclick="showForm('criterionForm')">
                            <p class="text-gray-700  truncate whitespace-nowrap text-lg">Add Criterion</p>
                            <svg width="16" height="16" class="text-gray-700" viewBox="-5 0 25 25" xmlns="http://www.w3.org/2000/svg">
                                <path fill="currentColor" d="m3.454.57 10.848 10.424.09.08c.363.35.576.813.608 1.364l-.002.185c-.03.49-.243.954-.664 1.354l.005-.008L3.454 24.431a2.06 2.06 0 0 1-2.845 0 1.964 1.964 0 0 1 0-2.844l9.403-9.03L.609 3.413a1.964 1.964 0 0 1 0-2.844 2.06 2.06 0 0 1 2.845 0" fill="#1C1C1F" />
                            </svg>

                        </button>
                        <button class="w-full bg-gray-100/50 py-1 px-3 hover:bg-gray-200 flex items-center justify-between rounded-lg sidebar-button" onclick="showForm('subCriterionForm')">
                            <p class="text-gray-700  truncate whitespace-nowrap text-lg">Add Sub Criterion</p>
                            <svg width="16" height="16" class="text-gray-700" viewBox="-5 0 25 25" xmlns="http://www.w3.org/2000/svg">
                                <path fill="currentColor" d="m3.454.57 10.848 10.424.09.08c.363.35.576.813.608 1.364l-.002.185c-.03.49-.243.954-.664 1.354l.005-.008L3.454 24.431a2.06 2.06 0 0 1-2.845 0 1.964 1.964 0 0 1 0-2.844l9.403-9.03L.609 3.413a1.964 1.964 0 0 1 0-2.844 2.06 2.06 0 0 1 2.845 0" fill="#1C1C1F" />
                            </svg>

                        </button>
                        <button class="w-full bg-gray-100/50 py-1 px-3 hover:bg-gray-200 flex items-center justify-between rounded-lg sidebar-button" onclick="showForm('metricForm')">
                            <p class="text-gray-700  truncate whitespace-nowrap text-lg">Add Metric</p>
                            <svg width="16" height="16" class="text-gray-700" viewBox="-5 0 25 25" xmlns="http://www.w3.org/2000/svg">
                                <path fill="currentColor" d="m3.454.57 10.848 10.424.09.08c.363.35.576.813.608 1.364l-.002.185c-.03.49-.243.954-.664 1.354l.005-.008L3.454 24.431a2.06 2.06 0 0 1-2.845 0 1.964 1.964 0 0 1 0-2.844l9.403-9.03L.609 3.413a1.964 1.964 0 0 1 0-2.844 2.06 2.06 0 0 1 2.845 0" fill="#1C1C1F" />
                            </svg>

                        </button>
                    </div>
                </div>
                <div class="flex items-center justify-between w-full bg-gray-100 rounded-lg p-2 px-4">
                    <p>{{name}}</p>
                    <a href="/signout" class="text-red-500 hover:underline">Logout</a>
                </div>
            </div>
            <!-- Main Content -->
            <div class="w-full ml-96 p-8 fade-in scroll-smooth">
                {% if role == "admin" %}
                <header class="flex items-center justify-between gap-3 bg-white rounded-full w-fit max-w-4xl mx-auto p-3 shadow-md">
                    <a href="/" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-full transition duration-300 hover:bg-gray-800 hover:text-gray-200">Home</a>
                    <a href="/add-user" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-full transition duration-300 hover:bg-gray-800 hover:text-gray-200">Users</a>
                    <a href="/form-editor" class="px-4 py-2 rounded-full transition duration-300 bg-gray-800 text-gray-200">Form Creator</a>
                </header>
                {% endif %}
                <div class="mt-5 max-w-2xl mx-auto">
                    <div id="criterionForm" class="form  bg-white p-6 rounded-lg shadow-lg">
                        <form action="/manage-criterion/" method="POST" class="space-y-2">
                            {% csrf_token %}
                            <div>
                                <label for="criterionId" class="block text-gray-700 font-semibold mb-1">Criterion Number</label>
                                <input type="number" id="criterionId" name="criterionId" required class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300">
                            </div>
                            <div>
                                <label for="criterionName" class="block text-gray-700 font-semibold mb-1">Criterion Name</label>
                                <input type="text" id="criterionName" name="criterionName" required class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300">
                            </div>
                            <button type="submit" class="bg-blue-500 text-white px-6 py-3 rounded-lg shadow-lg hover:bg-blue-600 transition duration-300">Submit</button>
                        </form>
                    </div>
                    <div id="subCriterionForm" class="form hidden bg-white p-6 rounded-lg shadow-lg">
                        <form action="/manage-sub-criterion/" method="POST" class="space-y-2">
                            {% csrf_token %}
                            <div>
                                <label for="criterionId" class="block text-gray-700 font-semibold mb-1">Criterion</label>
                                <select id="criterionId" name="criterionId" required class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300">
                                    <option value disabled selected>Select Criterion</option>
                                    {% for criterion in criterions %}
                                    <option value={{criterion.id}}>{{criterion.criterionId}} {{criterion.name}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div>
                                <label for="subCriterionId" class="block text-gray-700 font-semibold mb-1">Sub Criterion Number</label>
                                <input type="number" id="subCriterionId" name="subCriterionId" required class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300">
                            </div>
                            <div>
                                <label for="subCriterionName" class="block text-gray-700 font-semibold mb-1">Sub Criterion Name</label>
                                <input type="text" id="subCriterionName" name="subCriterionName" required class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300">
                            </div>

                            <button type="submit" class="bg-blue-500 text-white px-6 py-3 rounded-lg shadow-lg hover:bg-blue-600 transition duration-300">Submit</button>
                        </form>
                    </div>
                    <div id="metricForm" class="form hidden bg-white p-6 rounded-lg shadow-lg">
                        <form action="/manage-metrics/" method="POST" class="space-y-2">
                            {% csrf_token %}
                            <div>
                                <label for="subCriterionId" class="block text-gray-700 font-semibold mb-1">Sub Criterion</label>
                                <select id="subCriterionId" name="subCriterionId" required class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300">
                                    <option value disabled selected>Select Sub Criterion</option>
                                    {% for subCriterion in subCriterions %}
                                    <option value={{subCriterion.id}}>{{subCriterion.criterion.criterionId}}.{{subCriterion.SubCriterionId}} {{subCriterion.name}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div>
                                <label for="metricId" class="block text-gray-700 font-semibold mb-1">Metric Number</label>
                                <input type="number" id="metricId" name="metricId" required class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300">
                            </div>
                            <div>
                                <label for="metricQuestion" class="block text-gray-700 font-semibold mb-1">Metric Question</label>
                                <textarea id="metricQuestion" name="metricQuestion" required class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300"></textarea>
                            </div>
                            <div>
                                <label for="maxLength" class="block text-gray-700 font-semibold mb-1">Max Length</label>
                                <input type="number" id="maxLength" name="maxLength" required class="w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300">
                            </div>
                            <button type="submit" class="bg-blue-500 text-white px-6 py-3 rounded-lg shadow-lg hover:bg-blue-600 transition duration-300">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <script>
            function showForm(formId) {
                document.querySelectorAll('.form').forEach(form => form.classList.add('hidden'));
                document.getElementById(formId).classList.remove('hidden');
                
                // Highlight the selected button
                document.querySelectorAll('.sidebar-button').forEach(button => button.classList.remove('bg-gray-200'));
                document.querySelector(`[onclick="showForm('${formId}')"]`).classList.add('bg-gray-200');
            }
        </script>
    </body>
</html>